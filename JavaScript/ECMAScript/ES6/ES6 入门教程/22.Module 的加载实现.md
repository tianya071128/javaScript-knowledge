## 1. 浏览器加载

**`defer`与`async`的区别是：`defer`要等到整个页面在内存中正常渲染结束（DOM 结构完全生成，以及其他脚本执行完成），才会执行；`async`一旦下载完，渲染引擎就会中断渲染，执行这个脚本以后，再继续渲染。一句话，`defer`是“渲染完再执行”，`async`是“下载完就执行”。另外，如果有多个`defer`脚本，会按照它们在页面出现的顺序加载，而多个`async`脚本是不能保证加载顺序的。**

浏览器加载 ES6 模块，也使用 `<script>` 标签，但是要加入 `type="module"` 属性。

```javascript
<script type="module" src="./foo.js"></script>
```

浏览器对于带有`type="module"`的``，都是异步加载，不会造成堵塞浏览器，即等到整个页面渲染完，再执行模块脚本，等同于打开了``标签的`defer`属性。



## 2. ES6 模块与 CommonJS 模块的差异

有两个重大差异：

1. CommonJS 模块输出的是一个值得拷贝，ES6 模块输出的是值得引用。

2. CommonJS 模块运行时加载，ES6 模块时编译时输出接口。

   > 是因为 CommonJS 加载的是一个对象（即 `module.exports` 属性），该对象只有在脚本运行完才会生成。而 ES6 模块不是对象，它的对外接口只是一种静态定义，在代码静态解析阶段就会生成。

